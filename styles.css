/* --- Słodki, różowy motyw strony (canvas NIE jest stylowany) --- */
:root{
  --bg-top: #ffe9f4;
  --bg-mid: #fff3fa;
  --bg-btm: #ffffff;
  --text: #5b2240;
  --muted: #8b4d6f;
  --card: #fff7fb;
  --border: #ffd3ea;
  --pink: #ff9ed1;
  --pink-2: #ff7fbd;
  --pink-3: #ff66b1;
  --green: #2ecc71;
  --danger: #ef476f;
  --shadow: 0 6px 18px rgba(255, 153, 204, .25);
}

/* Tło */
body{
  margin:0;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
  color: var(--text);
  background:
    linear-gradient(180deg, var(--bg-top), var(--bg-mid) 40%, var(--bg-btm));
}

/* Główna kolumna */
.wrap{
  max-width: 980px;
  margin: 0 auto;
  padding: 16px;
}

/* Pasek górny */
.topbar{
  display:flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 12px;
}
.logo{
  display:flex;
  align-items:center;
  gap: 10px;
  font-size: 24px;
  font-weight: 900;
  color: var(--pink-3);
}
.stats{
  display:flex;
  gap: 12px;
  flex-wrap: wrap;
}
.stat{
  background: var(--card);
  border: 2px solid var(--border);
  border-radius: 12px;
  padding: 8px 10px;
  min-width: 150px;
  box-shadow: var(--shadow);
}
.stat > span{
  display:block;
  font-weight: 700;
  margin-bottom: 4px;
  color: var(--muted);
  font-size: 12px;
}
.bar{
  background: #ffe6f3;
  border: 2px solid var(--border);
  border-radius: 999px;
  height: 12px;
  position: relative;
  overflow: hidden;
}
.fill{
  position:absolute; left:0; top:0; bottom:0;
  background: linear-gradient(90deg, #ff94cf, #ff66b1);
  width: 50%;
}

/* Scena */
.stage{
  background: var(--card);
  border: 2px solid var(--border);
  border-radius: 22px;
  padding: 10px;
  box-shadow: var(--shadow);
}

/* NIE stylujemy samego canvasa – zostaje jak był */
#c { display:block; width:100%; height:auto; }

/* Imię */
.name-badge{
  position: absolute;
  left: 32px; top: 78px;
  padding: 6px 12px;
  background: #fff;
  border: 2px solid var(--border);
  border-radius: 999px;
  font-weight: 700;
  box-shadow: var(--shadow);
  pointer-events: none;
}

/* Przyciski (oprócz „Wyjdź”, który jest rysowany na canvasie) */
.controls{
  display:flex; gap:10px; justify-content: center;
  margin-top: 14px;
}
.btn{
  appearance:none; border:0;
  padding: 10px 16px;
  border-radius: 14px;
  background: linear-gradient(180deg, var(--pink), var(--pink-2));
  color:#fff; font-weight: 700;
  letter-spacing: .2px;
  box-shadow: 0 2px 0 #c25599, var(--shadow);
  cursor: pointer;
  border: 2px solid #ffc4e4;
  transform: translateY(0);
  transition: transform .06s ease, filter .2s ease, opacity .2s;
}
.btn:hover{ filter: brightness(1.04); }
.btn:active{ transform: translateY(1px); }
.btn-ghost{
  background: #fff; color: var(--pink-3);
  border: 2px dashed var(--pink-2);
  box-shadow: none;
}
.btn-accept{
  background: linear-gradient(180deg, #ffb4de, #ff8cc8);
}

/* Modal */
.modal{
  position: fixed; inset:0; display:none;
  align-items:center; justify-content:center;
  background: rgba(255, 182, 218, .22);
  backdrop-filter: blur(4px);
  z-index: 1001;
}
.modal[aria-hidden="false"]{ display:flex; }
.modal-card{
  width: min(560px, 94vw);
  background: #fff;
  border: 2px solid var(--border);
  border-radius: 18px;
  padding: 16px;
  box-shadow: var(--shadow);
}
.modal-card h2{ margin: 0 0 10px 0; }
.modal-card h3{ margin: 14px 0 8px 0; }
.form-row{ display:flex; flex-direction:column; gap:6px; }
.form-row input{
  padding: 10px 12px;
  border: 2px solid var(--border);
  border-radius: 12px;
  font-weight: 700;
}
.colors{
  display:flex; gap:8px;
}
.color-option{
  width: 36px; height: 36px; border-radius: 999px;
  border: 2px solid var(--border);
}
.color-option.pink{   background:#ffd6eb; }
.color-option.blue{   background:#c9ddff; }
.color-option.yellow{ background:#ffe99f; }
.color-option.selected{ outline: 2px solid var(--pink-2); }

/* Panel otoczeń tworzony dynamicznie */
.env-panel{
  display:flex; align-items:center; gap:6px;
  background: #fff; border: 2px solid var(--border);
  border-radius: 999px; padding: 6px 10px;
  width: fit-content;
  box-shadow: var(--shadow);
}
.env-panel button{
  border: 0; background: #ffe6f3; color: var(--text); padding: 6px 10px;
  border-radius: 999px; font-weight: 700; cursor: pointer;
}
.env-panel button.selected{ background: var(--pink); color:#fff; }
.env-panel button[aria-pressed="true"]{ box-shadow: 0 0 0 2px #ffc4e4 inset; }

/* === iOS/mobile: unscrollable app & responsive controls === */
html, body {
  height: 100%;
  overflow: hidden;
  overscroll-behavior: none;
  -webkit-overflow-scrolling: auto;
  touch-action: none;
  -ms-touch-action: none;
  -webkit-text-size-adjust: 100%;
}
* {
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  user-select: none;
}
.wrap {
  position: fixed;
  inset: 0;
  display: flex;
  flex-direction: column;
}
/* Fullscreen canvas during mini-games */
body.minigame .topbar,
body.minigame .controls { display: none; }

body.minigame #c {
  width: 100vw;
  height: 100vh;
  display: block;
}

/* Responsive buttons (home UI) */
.btn{
  font-size: clamp(14px, 2.4vw, 18px);
  padding: clamp(8px, 1.7vw, 12px) clamp(12px, 2.2vw, 16px);
  min-height: clamp(34px, 6vh, 44px);
}
.controls{ gap: clamp(6px, 1.5vw, 12px); }

/* Rotate hint shown only while in mini-game & portrait */
#rotateHint{
  position: fixed; inset: 0;
  display: none;
  align-items: center; justify-content: center;
  text-align: center;
  background: rgba(0,0,0,.65);
  color: #fff;
  z-index: 2000;
  padding: 32px;
  font: 700 18px/1.4 system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
}
body.minigame.portrait #rotateHint{ display: flex; }
